<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Phone Number Verification</title>
</head>
<body>

<!-- Login Section -->
<div>
  <h2>Enter Mobile Number</h2>
  <input type="text" id="mobileNumber" placeholder="Enter your mobile number" />
  <button id="sendVerificationCode">Send Verification Code</button>

  <div id="verificationSection" style="display:none;">
    <h3>Enter Verification Code</h3>
    <input type="text" id="verificationCode" placeholder="Verification Code" />
    <button id="verifyCode">Verify Code</button>
  </div>
</div>

<script>
  const sendVerificationCodeButton = document.getElementById('sendVerificationCode');
  const verifyCodeButton = document.getElementById('verifyCode');
  const mobileNumberInput = document.getElementById('mobileNumber');
  const verificationCodeInput = document.getElementById('verificationCode');
  const verificationSection = document.getElementById('verificationSection');

  sendVerificationCodeButton.addEventListener('click', () => {
    const phoneNumber = mobileNumberInput.value;
    fetch('/send-code', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ phoneNumber })
    })
    .then(response => response.json())
    .then(data => {
      alert(data.message);
      verificationSection.style.display = 'block';  // Show the verification input section
    })
    .catch(error => {
      alert('Error sending verification code');
    });
  });

  verifyCodeButton.addEventListener('click', () => {
    const phoneNumber = mobileNumberInput.value;
    const verificationCode = verificationCodeInput.value;
    fetch('/verify-code', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ phoneNumber, code: verificationCode })
    })
    .then(response => response.json())
    .then(data => {
      if (data.message === 'Phone number verified successfully') {
        alert('Verification successful!');
      } else {
        alert('Invalid code');
      }
    })
    .catch(error => {
      alert('Error verifying code');
    });
  });
</script>

</body>
</html>
